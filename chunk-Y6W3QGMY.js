import{h as a,i as u}from"./chunk-5Q3WX7JK.js";var T=(e,o,t)=>{let c=e.get(o);c?c.includes(t)||c.push(t):e.set(o,[t])},k=(e,o)=>{let t;return(...c)=>{t&&clearTimeout(t),t=setTimeout(()=>{t=0,e(...c)},o)}},O=e=>!("isConnected"in e)||e.isConnected,w=k(e=>{for(let o of e.keys())e.set(o,e.get(o).filter(O))},2e3),x=()=>{if(typeof a!="function")return{};let e=new Map;return{dispose:()=>e.clear(),get:o=>{let t=a();t&&T(e,o,t)},set:o=>{let t=e.get(o);t&&e.set(o,t.filter(u)),w(e)},reset:()=>{e.forEach(o=>o.forEach(u)),w(e)}}},g=e=>typeof e=="function"?e():e,C=(e,o=(t,c)=>t!==c)=>{let t=g(e),c=new Map(Object.entries(t??{})),i={dispose:[],get:[],set:[],reset:[]},l=()=>{var s;c=new Map(Object.entries((s=g(e))!==null&&s!==void 0?s:{})),i.reset.forEach(n=>n())},E=()=>{i.dispose.forEach(s=>s()),l()},m=s=>(i.get.forEach(n=>n(s)),c.get(s)),p=(s,n)=>{let r=c.get(s);o(n,r,s)&&(c.set(s,n),i.set.forEach(d=>d(s,n,r)))},y=typeof Proxy>"u"?{}:new Proxy(t,{get(s,n){return m(n)},ownKeys(s){return Array.from(c.keys())},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},has(s,n){return c.has(n)},set(s,n,r){return p(n,r),!0}}),h=(s,n)=>(i[s].push(n),()=>{_(i[s],n)});return{state:y,get:m,set:p,on:h,onChange:(s,n)=>{let r=h("set",(M,S)=>{M===s&&n(S)}),d=h("reset",()=>n(g(e)[s]));return()=>{r(),d()}},use:(...s)=>{let n=s.reduce((r,d)=>(d.set&&r.push(h("set",d.set)),d.get&&r.push(h("get",d.get)),d.reset&&r.push(h("reset",d.reset)),d.dispose&&r.push(h("dispose",d.dispose)),r),[]);return()=>n.forEach(r=>r())},dispose:E,reset:l,forceUpdate:s=>{let n=c.get(s);i.set.forEach(r=>r(s,n,n))}}},_=(e,o)=>{let t=e.indexOf(o);t>=0&&(e[t]=e[e.length-1],e.length--)},U=(e,o)=>{let t=C(e,o);return t.use(x()),t},{state:f,onChange:v,reset:I,dispose:P}=U({mode:"light",theme:"modus-classic"}),L={state:f,onChange:v,setTheme:e=>f.theme=e,setMode:e=>f.mode=e,reset:I,dispose:P},V=e=>{f.theme=e?.theme||"modus-classic";let o=localStorage.getItem("modus-theme-config");if(o){let t=JSON.parse(o);f.mode=t.mode}else{let t=window.matchMedia("(prefers-color-scheme: dark)").matches;f.mode=t?"dark":"light"}},z=()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),o=t=>{localStorage.getItem("preferred-mode")||(f.mode=t.matches?"dark":"light")};return e.addEventListener("change",o),()=>e.removeEventListener("change",o)};export{L as a,V as b,z as c};
